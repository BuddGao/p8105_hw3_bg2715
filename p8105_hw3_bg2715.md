p8105\_hw2\_bg2715
================

Problem 1

Loading data.

``` r
data("instacart")
instacart %>%
  head(3)
```

    ## # A tibble: 3 x 15
    ##   order_id product_id add_to_cart_order reordered user_id eval_set order_number
    ##      <int>      <int>             <int>     <int>   <int> <chr>           <int>
    ## 1        1      49302                 1         1  112108 train               4
    ## 2        1      11109                 2         1  112108 train               4
    ## 3        1      10246                 3         0  112108 train               4
    ## # ... with 8 more variables: order_dow <int>, order_hour_of_day <int>,
    ## #   days_since_prior_order <int>, product_name <chr>, aisle_id <int>,
    ## #   department_id <int>, aisle <chr>, department <chr>

Short description: This dataset has 1384617 rows and 15 columns. Each
row represent a single item ordered and each column represent a
feature/information of that order. Key variables are “aisle”,
“product\_name”, “order\_dow”, “order\_hour\_of\_day” and so on. For
example, the first line means user 112108 ordered bulgarian yogurt from
aisle yogurt in department dairy eggs at ten o’clock on Thursday.

``` r
ai_df = instacart %>%
  count(aisle) %>%
  arrange(-n)
  knitr::kable(head(ai_df[1:4, ]))
```

| aisle                      |      n |
|:---------------------------|-------:|
| fresh vegetables           | 150609 |
| fresh fruits               | 150473 |
| packaged vegetables fruits |  78493 |
| yogurt                     |  55240 |

There are 134 aisles and the most items ordered from “fresh vegetables”
and “fresh fruits” aisles.

``` r
ai_plot = instacart %>%
  count(aisle) %>%
  filter(n > 10000) %>%
  arrange(n) 

ggplot(ai_plot, aes(x = aisle, y = n)) + geom_point() + theme(axis.text.x = element_text(angle = 90, hjust = 0.5, vjust = 0.5))
```

<img src="p8105_hw3_bg2715_files/figure-gfm/unnamed-chunk-3-1.png" width="90%" />

Most of them are less than 40000.

``` r
bdp_df = instacart %>%
  filter(aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits")) %>%  
  group_by(aisle, product_name) %>%
  summarise(n_times = n()) %>%
  top_n(n = 3)
```

    ## `summarise()` has grouped output by 'aisle'. You can override using the `.groups` argument.

    ## Selecting by n_times

``` r
  knitr::kable(bdp_df)
```

| aisle                      | product\_name                                 | n\_times |
|:---------------------------|:----------------------------------------------|---------:|
| baking ingredients         | Cane Sugar                                    |      336 |
| baking ingredients         | Light Brown Sugar                             |      499 |
| baking ingredients         | Pure Baking Soda                              |      387 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |       28 |
| dog food care              | Small Dog Biscuits                            |       26 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |       30 |
| packaged vegetables fruits | Organic Baby Spinach                          |     9784 |
| packaged vegetables fruits | Organic Blueberries                           |     4966 |
| packaged vegetables fruits | Organic Raspberries                           |     5546 |

The most popular item in “baking ingredients”, “dog food care”, and
“packaged vegetables fruits” is “Light Brown Sugar” (499), “Snack Sticks
Chicken & Rice Recipe Dog Treats” (30) and “Organic Baby Spinach” (9784)
respectively.

``` r
pc_df = instacart %>%
  filter(product_name %in% c("Pink Lady Apples", "Coffee Ice Cream")) %>%
  group_by(product_name, order_dow) %>%
  summarise(mean_hour = mean(order_hour_of_day)) %>%
  pivot_wider(
    names_from = order_dow,
    values_from = mean_hour
  ) 
```

    ## `summarise()` has grouped output by 'product_name'. You can override using the `.groups` argument.

``` r
colnames(pc_df) = c('product_name', 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat')
knitr::kable(pc_df)
```

| product\_name    |      Sun |      Mon |      Tue |      Wed |      Thu |      Fri |      Sat |
|:-----------------|---------:|---------:|---------:|---------:|---------:|---------:|---------:|
| Coffee Ice Cream | 13.77419 | 14.31579 | 15.38095 | 15.31818 | 15.21739 | 12.26316 | 13.83333 |
| Pink Lady Apples | 13.44118 | 11.36000 | 11.70213 | 14.25000 | 11.55172 | 12.78431 | 11.93750 |

The mean hour of ordering of coffee ice cream is greater than that of
pink lady apples except for Friday.
